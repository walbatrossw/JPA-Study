# 실전예제 1

## 요구사항 분석과 기본 매핑

- 요구사항 분석
    - 회원은 상품 주문할 수 있다.
    - 주문 시 여러 종류의 상품을 선택할 수 있다.
    
- 기능
    1. 회원기능
        - 회원 등록
        - 회원 조회
    2. 상품기능
        - 상품등록
        - 상품수정
        - 상품조회
    3. 주문기능
        - 상품주문
        - 주문내역조회
        - 주문취소
        
- 도메인 모델 분석
    1. 회원과 주문 
        - 회원은 여러번 주문할 수 있기 때문에 1:n 관계
    2. 주문과 상품 
        - 주문할 때 여러 상품을 선택할 수 있고, 같은 상품도 여러번 주문할 수 있기 때문에 n:n 관계
        - 관계형 데이터베이스, 엔티티에서는 n:n 관계는 거의 사용하지 않음
        - 주문상품이라는 연결 엔티티를 추가해서 n:n 관계를 1:n, n:1 관계로 풀어냄
        - 주문상품에는 해당 상품을 구매한 금액과 수량정보가 포함
             
- 테이블 설계
    1. 회원 : 이름, 주소정보(도시, 번지, 우편번호)
    2. 주문 : 상품을 주문한 회원(외래키), 주문날짜, 주문상태(주문, 취소)
    3. 주문상품 : 주문(외래키), 주문상품(외래키), 주문금액, 주문수량
    4. 상품 : 이름, 가격, 재고수량(주문시 재고수량 감소)
    
- 엔티티 설계와 매핑